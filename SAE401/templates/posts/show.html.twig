{% extends 'base.html.twig' %}

{% block title %}Posts
{% endblock %}

{% block body %}
	<header class="h-[82px]">
		<nav class="flex justify-between items-center px-[100px] py-[25px] de">
			<a href="{{ path('home') }}" class="flex items-center gap-2">
				<img src="{{ asset('img/azure_black.svg') }}" alt="Logo" class="w-8 h-8">
				<span class="text-black text-xl font-bold">Azure</span>
			</a>
			{% if app.user %}
				<a href="{{path('profil')}}">
					<svg xmlns="http://www.w3.org/2000/svg" width="20" height="23" viewbox="0 0 20 23" fill="none">
						<path d="M10 12.6111C13.1066 12.6111 15.625 10.1238 15.625 7.05556C15.625 3.98731 13.1066 1.5 10 1.5C6.8934 1.5 4.375 3.98731 4.375 7.05556C4.375 10.1238 6.8934 12.6111 10 12.6111ZM10 12.6111C12.3869 12.6111 14.6761 13.5476 16.364 15.2146C18.0518 16.8816 19 19.1425 19 21.5M10 12.6111C7.61305 12.6111 5.32387 13.5476 3.63604 15.2146C1.94821 16.8816 1 19.1425 1 21.5" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
					</svg>
				</a>
			{% else %}
				<a href="{{path('app_login')}}">Se connecter</a>
			{% endif %}
		</nav>
	</header>
	<main class="flex justify-center mb-[150px]">
		<div class="max-w-[1260px] w-full">
			<div class="flex gap-[10px] items-center">
				<h2 class="text-[36px] font-[600] text-[#121212]">{{post.title}}
				</h2>
				{% if post.isCertified %}
					<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="25" height="25" viewbox="0 0 256 256" xml:space="preserve">
						<g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)">
							<path d="M 49.66 1.125 L 49.66 1.125 c 4.67 -2.393 10.394 -0.859 13.243 3.548 l 0 0 c 1.784 2.761 4.788 4.495 8.071 4.66 l 0 0 c 5.241 0.263 9.431 4.453 9.694 9.694 v 0 c 0.165 3.283 1.899 6.286 4.66 8.071 l 0 0 c 4.407 2.848 5.941 8.572 3.548 13.242 l 0 0 c -1.499 2.926 -1.499 6.394 0 9.319 l 0 0 c 2.393 4.67 0.859 10.394 -3.548 13.242 l 0 0 c -2.761 1.784 -4.495 4.788 -4.66 8.071 v 0 c -0.263 5.241 -4.453 9.431 -9.694 9.694 h 0 c -3.283 0.165 -6.286 1.899 -8.071 4.66 l 0 0 c -2.848 4.407 -8.572 5.941 -13.242 3.548 l 0 0 c -2.926 -1.499 -6.394 -1.499 -9.319 0 l 0 0 c -4.67 2.393 -10.394 0.859 -13.242 -3.548 l 0 0 c -1.784 -2.761 -4.788 -4.495 -8.071 -4.66 h 0 c -5.241 -0.263 -9.431 -4.453 -9.694 -9.694 l 0 0 c -0.165 -3.283 -1.899 -6.286 -4.66 -8.071 l 0 0 C 0.266 60.054 -1.267 54.33 1.125 49.66 l 0 0 c 1.499 -2.926 1.499 -6.394 0 -9.319 l 0 0 c -2.393 -4.67 -0.859 -10.394 3.548 -13.242 l 0 0 c 2.761 -1.784 4.495 -4.788 4.66 -8.071 l 0 0 c 0.263 -5.241 4.453 -9.431 9.694 -9.694 l 0 0 c 3.283 -0.165 6.286 -1.899 8.071 -4.66 l 0 0 c 2.848 -4.407 8.572 -5.941 13.242 -3.548 l 0 0 C 43.266 2.624 46.734 2.624 49.66 1.125 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,214,153); fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round"/>
							<polygon points="36.94,66.3 36.94,66.3 36.94,46.9 36.94,46.9 62.8,35.34 72.5,45.04 " style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,191,137); fill-rule: nonzero; opacity: 1;" transform="  matrix(1 0 0 1 0 0) "/>
							<polygon points="36.94,66.3 17.5,46.87 27.2,37.16 36.94,46.9 60.11,23.7 69.81,33.39 " style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(255,255,255); fill-rule: nonzero; opacity: 1;" transform="  matrix(1 0 0 1 0 0) "/>
						</g>
					</svg>
				{% endif %}
			</div>

			<div class=" flex gap-[10px] items-center mt-[10px]">
				<a target="__blank" href="https://www.google.fr/maps/place/{{post.city}}" class="underline">{{post.region}},
					{{post.city}}</a>
				<p>·
					{{post.difficulty.name}}</p>
				<p>·
					{{post.activity.name}}</p>
			</div>
			<div class="max-w-[1260px] flex flex-col gap-[10px] w-full overflow-hidden mt-[20px]">
				<img src="{{ asset('uploads/' ~ images[0].filename) }}" alt="Logo" class="h-[500px] w-full rounded-t-[15px] object-cover">
				<div class="flex max-w-[1260px] w-full h-[250px] gap-[10px] overflow-x-auto">
					{% if images[1] is defined %}
						<img src="{{ asset('uploads/' ~ images[1].filename) }}" alt="Logo" class="object-cover min-w-[calc(50%-5px)]">
					{% endif %}

					{% if images[2] is defined %}
						<img src="{{ asset('uploads/' ~ images[2].filename) }}" alt="Logo" class="object-cover min-w-[calc(50%-5px)]">
					{% endif %}

					{% if images[3] is defined %}
						<img src="{{ asset('uploads/' ~ images[2].filename) }}" alt="Logo" class="object-cover min-w-[calc(50%-5px)]">
					{% endif %}

					{% if images[4] is defined %}
						<img src="{{ asset('uploads/' ~ images[2].filename) }}" alt="Logo" class="object-cover min-w-[calc(50%-5px)]">
					{% endif %}
				</div>
			</div>
			<div class="flex gap-[10px] mt-[20px]">
				<p class="text-[20px] font-[600]">Distance
					{{ lastPoint.distance|number_format(0, ',', ' ') }}
					m</p>

				<p class="text-[20px] font-[600]">·
					{{post.ascEle}}
					m D+</p>
				<p class="text-[20px] font-[600]">·
					{{post.descEle}}
					m D-</p>
			</div>
			<p class="mt-[20px] text-[18px] font-[400]">
				{{post.description}}
			</p>
			<section class="w-full relative mt-[40px]">
				<section class="w-full rounded-[15px] h-[calc(100vh-82px-24px)]" id="carte"></section>
				<div class="absolute top-[0] p-[12px] flex flex-col gap-[10px] items-center">
					<img src="{{ asset('img/azure_black.svg') }}" alt="Logo" class="w-[40px] h-[40px] hover:scale-90 transition duration-300 cursor-pointer">

					<button id="mapZoomIn" class="w-[50px] h-[50px] rounded-full black-gradiant text-white flex justify-center items-center opacity-[.6] cursor-pointer hover:scale-[.96] hover:opacity-100 transition duration-300">
						<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewbox="0 0 24 24" fill="none">
							<path d="M5 12H19M12 5V19" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					</button>
					<button id="mapZoomOut" class="w-[50px] h-[50px] rounded-full black-gradiant text-white flex justify-center items-center opacity-[.6] cursor-pointer hover:scale-[.96] hover:opacity-100 transition duration-300">
						<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewbox="0 0 24 24" fill="none">
							<path d="M5 12H19" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					</button>
				</div>
			</section>

			<section class="mt-[40px]">
				<h2 class="font-bold text-[40px] text-black text-left mt-10">Dénivelé</h2>
				<div id="elevationContainer" class="w-full">
					<canvas id="elevation" width="400" height="0"></canvas>
				</div>
			</section>

			<section class="mt-[40px]">
				<h2 class="font-bold text-[40px] text-black text-left mt-10">Conditions</h2>
				<div class="flex gap-[15px] justify-form_start items-center" id="currentWeather">
					<p class="text-[#63F679] text-[48px] font-[700]" id="currentTemp"></p>
					<img id="weatherIcon" src="">
				</div>
				<div class="flex gap-[5px]">
					<p class="text-[#000000] text-[14px] font-[400]" id="minTemp"></p>
					<p class="text-[#000000] text-[14px] font-[400]" id="maxTemp"></p>
				</div>
			</section>
		</div>
	</main>
	{% include 'footer.html.twig' %}
{% endblock %}

{% block javascripts %} <script type="module" src="{{ asset('scripts/post_view.js') }}"></script>
	 <script async src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDsRQNVaLvck3Jhk-LqJqfkUY6cpKOA-3c&callback=initMap&loading=async"></script>
{% endblock %}
